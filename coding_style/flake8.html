
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Style Guide Enforcement &#8212; PyAnsys Developers Guide 0.2.dev0 documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/blank.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Best Practices" href="best_practices.html" />
    <link rel="prev" title="Coding Style" href="index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><style>
    .navbar-light {
        background-color: black !important;
    }
</style>

<div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="https://docs.pyansys.com/">
  <img src="../_static/pyansys-logo-black-cropped.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon" >
      <i class="fas fa-bars" style="color:#fff; font-size:28px;"></i>
    </span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../overview/index.html">
  Overview
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../guidelines/index.html">
  Guidelines and Best Practices
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../library_description/index.html">
  Library Overview
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  Coding Style
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../documentation_style/index.html">
  API Documentation Style
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/pyansys/about" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Style Guide Enforcement
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="best_practices.html">
   Best Practices
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#flake8">
   Flake8
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#configuring-flake8">
     Configuring Flake8
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-flake8">
     Running Flake8
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#utilizing-black">
   Utilizing Black
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#minimum-standards">
   Minimum Standards
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="style-guide-enforcement">
<span id="id1"></span><h1>Style Guide Enforcement<a class="headerlink" href="#style-guide-enforcement" title="Permalink to this headline">¶</a></h1>
<p>The following sections describe the use of <a class="reference external" href="https://flake8.pycqa.org/en/latest/index.html">Flake8</a> for <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">PEP8</a> style
enforcement and the minimum standards expected. PyAnsys libraries
are expected to be consistent with these guidelines.</p>
<div class="section" id="flake8">
<h2>Flake8<a class="headerlink" href="#flake8" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://flake8.pycqa.org/en/latest/index.html">Flake8</a> is a Python tool for enforcing code styling. It is a wrapper
around the following three tools: <a class="reference external" href="https://pypi.org/project/pyflakes/">PyFlakes</a>, <a class="reference external" href="https://pypi.org/project/pycodestyle/">pycodestyle</a>, and
<a class="reference external" href="https://github.com/PyCQA/mccabe">Ned Batchelder’s McCabe script for complexity</a>. Flake8 runs all three tools at once,
checking the code against a variety of style rules, such as line length,
code complexity, and whitespace.</p>
<div class="section" id="configuring-flake8">
<span id="id3"></span><h3>Configuring Flake8<a class="headerlink" href="#configuring-flake8" title="Permalink to this headline">¶</a></h3>
<p>Flake8 supports configuring a specific set of style rules to
enforce. This configuration can be stored in your library in a
<code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code>, <code class="docutils literal notranslate"><span class="pre">tox.ini</span></code>, or <code class="docutils literal notranslate"><span class="pre">.flake8</span></code> file. PyAnsys libraries
store the flake8 configuration in a <code class="docutils literal notranslate"><span class="pre">.flake8</span></code> file at the root of the
repository.</p>
<p>Here is an example of a <code class="docutils literal notranslate"><span class="pre">.flake8</span></code> configuration file from a PyAnsys
library:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">flake8</span><span class="p">]</span>
<span class="n">exclude</span> <span class="o">=</span> <span class="n">venv</span><span class="p">,</span> <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span><span class="p">,</span> <span class="n">doc</span><span class="o">/</span><span class="n">_build</span>
<span class="n">select</span> <span class="o">=</span> <span class="n">W191</span><span class="p">,</span> <span class="n">W291</span><span class="p">,</span> <span class="n">W293</span><span class="p">,</span> <span class="n">W391</span><span class="p">,</span> <span class="n">E115</span><span class="p">,</span> <span class="n">E117</span><span class="p">,</span> <span class="n">E122</span><span class="p">,</span> <span class="n">E124</span><span class="p">,</span> <span class="n">E125</span><span class="p">,</span> <span class="n">E225</span><span class="p">,</span> <span class="n">E231</span><span class="p">,</span> <span class="n">E301</span><span class="p">,</span> <span class="n">E303</span><span class="p">,</span> <span class="n">E501</span><span class="p">,</span> <span class="n">F401</span><span class="p">,</span> <span class="n">F403</span>
<span class="n">count</span> <span class="o">=</span> <span class="kc">True</span>
<span class="nb">max</span><span class="o">-</span><span class="n">complexity</span> <span class="o">=</span> <span class="mi">10</span>
<span class="nb">max</span><span class="o">-</span><span class="n">line</span><span class="o">-</span><span class="n">length</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">statistics</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>Flake8 has many options that can be set within the configuration file.
A list of possible options can be found <a class="reference external" href="https://flake8.pycqa.org/en/latest/user/options.html">here</a>.</p>
<p>The above configuration defines the following options:</p>
<ul>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">exclude</span></code></dt><dd><p>This denotes subdirectories and <code class="docutils literal notranslate"><span class="pre">doc/_build</span></code>, along with all
<code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> files to be excluded from the check.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">select</span></code></dt><dd><p>This is a sequence of error codes that flake8 will report errors
for. The set in the above configuration is a basic set of errors to
check for and is not an exhaustive list.</p>
<p>A full list of error codes and their descriptions can be found <a class="reference external" href="https://flake8.pycqa.org/en/3.9.2/user/error-codes.html">here</a>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">count</span></code></dt><dd><p>The total number of errors is printed at the end of the check.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">max-complexity</span></code></dt><dd><p>This sets the maximum allowed McCabe complexity value for a block of code.
The value of 10 was chosen because it is a common default.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">max-line-length</span></code></dt><dd><p>This denotes the maximum line length for any one line of code.
The <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">PEP8</a> standard advises a maximum line length of 79. Because
this is a bit limiting in some cases, the maximum line length
recommended for a PyAnsys library is 100.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">statistics</span></code></dt><dd><p>This enables the number of occurrences of each error or warning code
to be printed as a report at the end of the check.</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="running-flake8">
<h3>Running Flake8<a class="headerlink" href="#running-flake8" title="Permalink to this headline">¶</a></h3>
<p>First, to install flake8, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">flake8</span>
</pre></div>
</div>
<p>Then, flake8 can be run from inside your project directory by executing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flake8</span> <span class="o">.</span>
</pre></div>
</div>
<p>This uses the configuration defined in the <code class="docutils literal notranslate"><span class="pre">.flake8</span></code> file to
run the style checks on the appropriate files within the project and
report any errors.</p>
<p>In PyAnsys libraries, flake8 is run as part of the CI/CD for code style.
This action is run as a required check on pull requests, preventing
code in violation of style rules from being merged into the code
base.</p>
</div>
</div>
<div class="section" id="utilizing-black">
<h2>Utilizing Black<a class="headerlink" href="#utilizing-black" title="Permalink to this headline">¶</a></h2>
<p>Manually checking for code styling can be a tedious task. Luckily,
several Python tools for auto-formatting code to meet PEP8 standards
are available to help with this. The PyAnsys project suggests the use of the
the formatting tool <a class="reference external" href="https://black.readthedocs.io/en/stable/">black</a>.</p>
<p>On completing a code change, and before committing, <a class="reference external" href="https://black.readthedocs.io/en/stable/">black</a> can be
run to reformat the code, following the PEP8 guidelines enforced through
flake8. This will limit any manual code changes needed to address style
rules.</p>
<p>Optionally, it is possible to automate the use of <code class="docutils literal notranslate"><span class="pre">black</span></code>. This can be
done with the tool <a class="reference external" href="https://pre-commit.com/">pre-commit</a>. Setting up a <a class="reference external" href="https://black.readthedocs.io/en/stable/integrations/source_version_control.html">pre-commit hook
to run black</a>
will automatically format the code before committing. This simple way of
incorporating code style checks into the development workflow to maintain
PEP8 guidelines requires minimal manual effort.</p>
</div>
<div class="section" id="minimum-standards">
<h2>Minimum Standards<a class="headerlink" href="#minimum-standards" title="Permalink to this headline">¶</a></h2>
<p>The following section describes the minimum set of code style standards
expected in an PyAnsys library.</p>
<ul>
<li><p><a class="reference external" href="https://www.flake8rules.com/rules/W191.html">W191</a> - <strong>Indentation contains tabs.</strong></p>
<blockquote>
<div><p>Indentations should be composed of four spaces, not tabs.</p>
</div></blockquote>
</li>
<li><p><a class="reference external" href="https://www.flake8rules.com/rules/W291.html">W291</a> - <strong>Trailing whitespace.</strong></p>
<blockquote>
<div><p>There should be no trailing whitespace after the final character
on a line.</p>
</div></blockquote>
</li>
<li><p><a class="reference external" href="https://www.flake8rules.com/rules/W293.html">W293</a> - <strong>Blank line contains whitespace.</strong></p>
<blockquote>
<div><p>Blank lines should not have any tabs or spaces.</p>
</div></blockquote>
</li>
<li><p><a class="reference external" href="https://www.flake8rules.com/rules/W391.html">W391</a> - <strong>Blank line at the end of every file.</strong></p>
<blockquote>
<div><p>There should be only one blank line at the end of each file. This
warning will occur when there are zero, two, or more than two blank
lines.</p>
</div></blockquote>
</li>
<li><p><a class="reference external" href="https://www.flake8rules.com/rules/E115.html">E115</a> - <strong>Comment block expected an indent.</strong></p>
<blockquote>
<div><p>An indented block comment was expected but a non-indented block
comment was found instead.</p>
</div></blockquote>
</li>
<li><p><a class="reference external" href="https://www.flake8rules.com/rules/E117.html">E117</a> - <strong>Line over-indented.</strong></p>
<blockquote>
<div><p>Lines should be consistently indented in increments of two or four.</p>
</div></blockquote>
</li>
<li><p><a class="reference external" href="https://www.flake8rules.com/rules/E122.html">E122</a> - <strong>Continuation line missing indentation or outdented.</strong></p>
<blockquote>
<div><p>Continuation line is not indented as far as it should be or is
indented too far.</p>
</div></blockquote>
</li>
<li><p><a class="reference external" href="https://www.flake8rules.com/rules/E124.html">E124</a> - <strong>Closing bracket does not match indentation.</strong></p>
<blockquote>
<div><p>Closing bracket does not match the indentation of the opening bracket.</p>
</div></blockquote>
</li>
<li><p><a class="reference external" href="https://www.flake8rules.com/rules/E125.html">E125</a> - <strong>Continuation line with same indent as next logical line.</strong></p>
<blockquote>
<div><p>Continuation line is indented at the same level as the next logical
line. It should be indented to one more level to distinguish it from
the next line.</p>
</div></blockquote>
</li>
<li><p><a class="reference external" href="https://www.flake8rules.com/rules/E225.html">E225</a> - <strong>Missing whitespace around operator.</strong></p>
<blockquote>
<div><p>There should be one space before and after all operators.</p>
</div></blockquote>
</li>
<li><p><a class="reference external" href="https://www.flake8rules.com/rules/E231.html">E231</a> - <strong>Missing whitespace after certain special characters.</strong></p>
<blockquote>
<div><p>There should be one space after the characters <code class="docutils literal notranslate"><span class="pre">,</span></code>, <code class="docutils literal notranslate"><span class="pre">;</span></code>, and <code class="docutils literal notranslate"><span class="pre">:</span></code>.</p>
</div></blockquote>
</li>
<li><p><a class="reference external" href="https://www.flake8rules.com/rules/E301.html">E301</a> - <strong>Expected a blank line, found none.</strong></p>
<blockquote>
<div><p>All methods of a class should have a single line between them.</p>
</div></blockquote>
</li>
<li><p><a class="reference external" href="https://www.flake8rules.com/rules/E303.html">E303</a> - <strong>Too many blank lines.</strong></p>
<blockquote>
<div><p>There should be one line between methods and two lines between
methods and classes.</p>
</div></blockquote>
</li>
<li><p><a class="reference external" href="https://www.flake8rules.com/rules/E501.html">E501</a> - <strong>Line too long.</strong></p>
<blockquote>
<div><p>All code lines should not exceed 100 characters. The
<a class="reference external" href="https://www.python.org/dev/peps/pep-0008/#maximum-line-length">PEP8 line length</a>
guidelines suggest a maximum line length of 79. Following this limit
is not as necessary today due to modern screen sizes. The suggested maximum
length of 100 can be easier to accommodate and can still support
viewing files side-by-side in code editors.</p>
</div></blockquote>
</li>
<li><p><a class="reference external" href="https://www.flake8rules.com/rules/F401.html">F401</a> - <strong>Module imported but unused.</strong></p>
<blockquote>
<div><p>Modules should only be imported if they are actually used.</p>
</div></blockquote>
</li>
<li><p><a class="reference external" href="https://www.flake8rules.com/rules/F403.html">F403</a> - <strong>‘from module import *’ used.</strong></p>
<blockquote>
<div><p>Importing using wildcards (<code class="docutils literal notranslate"><span class="pre">*</span></code>) should never be done. Importing
modules this way leads to uncertainty and pollutes the code. You
cannot know exactly what is being imported and name clashes are common.
Import only the modules to be used.</p>
</div></blockquote>
</li>
<li><p><strong>Limit complexity of code to 10.</strong></p>
<p>This is enforced by the <code class="docutils literal notranslate"><span class="pre">max-complexity</span></code> option described in
<a class="reference internal" href="#configuring-flake8"><span class="std std-ref">Configuring Flake8</span></a>. Limiting code complexity leads to code that
is easier to understand and less risky to modify. Write low-
complexity code when possible.</p>
</li>
</ul>
<p>Your <code class="docutils literal notranslate"><span class="pre">.flake8</span></code> file should be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">flake8</span><span class="p">]</span>
<span class="n">exclude</span> <span class="o">=</span> <span class="n">venv</span><span class="p">,</span> <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span><span class="p">,</span> <span class="n">doc</span><span class="o">/</span><span class="n">_build</span>
<span class="n">select</span> <span class="o">=</span> <span class="n">W191</span><span class="p">,</span> <span class="n">W291</span><span class="p">,</span> <span class="n">W293</span><span class="p">,</span> <span class="n">W391</span><span class="p">,</span> <span class="n">E115</span><span class="p">,</span> <span class="n">E117</span><span class="p">,</span> <span class="n">E122</span><span class="p">,</span> <span class="n">E124</span><span class="p">,</span> <span class="n">E125</span><span class="p">,</span> <span class="n">E225</span><span class="p">,</span> <span class="n">E231</span><span class="p">,</span> <span class="n">E301</span><span class="p">,</span> <span class="n">E303</span><span class="p">,</span> <span class="n">E501</span><span class="p">,</span> <span class="n">F401</span><span class="p">,</span> <span class="n">F403</span>
<span class="n">count</span> <span class="o">=</span> <span class="kc">True</span>
<span class="nb">max</span><span class="o">-</span><span class="n">complexity</span> <span class="o">=</span> <span class="mi">10</span>
<span class="nb">max</span><span class="o">-</span><span class="n">line</span><span class="o">-</span><span class="n">length</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">statistics</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
</div>


              </div>
              
              
          </main>
          

      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright (c) 2022 ANSYS, Inc. All rights reserved.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.3.2.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>